{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jonat\\\\Desktop\\\\otros\\\\udemy\\\\react\\\\mi-app\\\\client\\\\src\\\\context\\\\shop-context.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState } from 'react';\nimport axios from 'axios';\nimport { useEffect } from 'react';\nimport Swal from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ShopContext = /*#__PURE__*/createContext(null);\nconst URI = 'http://localhost:3001/listaProductos';\nconst getDefaultCart = () => {\n  let cart = {};\n  for (let i = 0; i < 100; i++) {\n    cart[i] = 0;\n  }\n  return cart;\n};\nexport const ShopContextProvider = props => {\n  _s();\n  const [cartItems, setCartItems] = useState(getDefaultCart());\n  const [payAumount, setPayAumount] = useState(0);\n  const [products, setProducts] = useState([]);\n  useEffect(() => {\n    getProducts();\n  }, []);\n  const [inventario, setInventario] = useState([]);\n  const [logged, setLogged] = useState(0);\n  const loggedChanger = value => setLogged(value);\n  const [admin, setAdmin] = useState(false);\n  const AdminChanger = value => setAdmin(value);\n  const [nombreUser, setNombreUser] = useState('');\n  const NombreUser = value => setNombreUser(value);\n  const getProducts = async () => {\n    const res = await axios.get(URI);\n    setProducts(res.data);\n  };\n  const getInventario = () => {\n    let stock = 0;\n    stock = inventario.map(inv => stock = inv.inventario);\n    console.log(stock);\n    return stock;\n  };\n  const getTotalCartAmount = () => {\n    let totalAmount = 0;\n    for (const item in cartItems) {\n      if (cartItems[item] > 0) {\n        let itemInfo = products.find(product => product.id === Number(item));\n        totalAmount += cartItems[item] * itemInfo.precio;\n      }\n    }\n    return totalAmount;\n  };\n  const addToCart = itemId => {\n    axios.get(`http://localhost:3001/inventario/${itemId}`).then(({\n      data\n    }) => {\n      setInventario(data);\n      let cant = getInventario();\n      console.log(\"stock: \" + cant);\n      cant > 0 ? setCartItems(prev => ({\n        ...prev,\n        [itemId]: prev[itemId] + 1\n      })) : void 0;\n      cant === 0 ? Swal.fire(`El inventario esta vacio`) : void 0;\n\n      //setCartItems((prev) => ({...prev, [itemId]: prev[itemId] + 1 }));\n    }).catch(error => {\n      console.log(error.message);\n    });\n  };\n\n  /*bueno\r\n  const addToCart = (itemId) => {\r\n      let stock = getInventario();\r\n      console.log(\"stock: \"+stock);\r\n      setCartItems((prev) => ({...prev, [itemId]: prev[itemId] + 1 }))\r\n  };*/\n\n  const removeFromCart = async itemId => {\n    await axios.get(`http://localhost:3001/inventario/${itemId}`).then(({\n      data\n    }) => {\n      //data==='Unbooked' ? setCartItems((prev) => ({...prev, [itemId]: prev[itemId] - 1 })) : void(0);\n      setCartItems(prev => ({\n        ...prev,\n        [itemId]: prev[itemId] - 1\n      }));\n    }).catch(error => {\n      console.log(error.message);\n    });\n  };\n  const contextValue = {\n    cartItems,\n    addToCart,\n    removeFromCart,\n    getTotalCartAmount,\n    loggedChanger,\n    logged,\n    AdminChanger,\n    admin,\n    payAumount,\n    setPayAumount,\n    nombreUser,\n    NombreUser\n  };\n  return /*#__PURE__*/_jsxDEV(ShopContext.Provider, {\n    value: contextValue,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 9\n  }, this);\n};\n_s(ShopContextProvider, \"WlABfxHFtOAly5Wts3lDKHFuIus=\");\n_c = ShopContextProvider;\nvar _c;\n$RefreshReg$(_c, \"ShopContextProvider\");","map":{"version":3,"names":["React","createContext","useState","axios","useEffect","Swal","jsxDEV","_jsxDEV","ShopContext","URI","getDefaultCart","cart","i","ShopContextProvider","props","_s","cartItems","setCartItems","payAumount","setPayAumount","products","setProducts","getProducts","inventario","setInventario","logged","setLogged","loggedChanger","value","admin","setAdmin","AdminChanger","nombreUser","setNombreUser","NombreUser","res","get","data","getInventario","stock","map","inv","console","log","getTotalCartAmount","totalAmount","item","itemInfo","find","product","id","Number","precio","addToCart","itemId","then","cant","prev","fire","catch","error","message","removeFromCart","contextValue","Provider","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/jonat/Desktop/otros/udemy/react/mi-app/client/src/context/shop-context.jsx"],"sourcesContent":["import React, { createContext, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useEffect } from 'react';\r\nimport Swal from 'sweetalert2';\r\n\r\nexport const ShopContext = createContext(null);\r\nconst URI = 'http://localhost:3001/listaProductos';\r\n\r\nconst getDefaultCart = () => {\r\n    let cart = {}\r\n    for(let i = 0; i < 100 ; i++) {\r\n        cart[i] = 0\r\n    }\r\n    return cart;\r\n};\r\n\r\nexport const ShopContextProvider = (props) => {\r\n    const [cartItems, setCartItems] = useState(getDefaultCart());\r\n    const [payAumount,setPayAumount] = useState(0);\r\n\r\n    const[products, setProducts] = useState([])\r\n    useEffect(() => {\r\n        getProducts()\r\n    }, []);\r\n\r\n    const [inventario, setInventario] = useState([]);\r\n\r\n    const [logged, setLogged] = useState(0);\r\n    const loggedChanger = (value) => setLogged(value);\r\n\r\n    const [admin, setAdmin] = useState(false);\r\n    const AdminChanger = (value) => setAdmin(value);\r\n    \r\n    const [nombreUser, setNombreUser] = useState('');\r\n    const NombreUser = (value) => setNombreUser(value);\r\n    \r\n    const getProducts = async () => {\r\n        const res = await axios.get(URI)\r\n        setProducts(res.data);\r\n\r\n    }\r\n\r\n    const getInventario = () => {\r\n        let stock = 0;\r\n        stock = inventario.map(inv => (\r\n            stock = inv.inventario\r\n        ));\r\n        console.log(stock);\r\n        return stock;\r\n    }\r\n\r\n\r\n    const getTotalCartAmount = () => {\r\n        let totalAmount = 0;\r\n        for (const item in cartItems) {\r\n            if (cartItems[item] > 0) {\r\n                let itemInfo = products.find((product) => product.id === Number(item));\r\n                totalAmount += cartItems[item] * itemInfo.precio;\r\n            }\r\n        }\r\n        return totalAmount;\r\n    };\r\n\r\n\r\n\r\n    const addToCart = (itemId) => { \r\n        axios.get(`http://localhost:3001/inventario/${itemId}`)\r\n        .then(({ data }) => {\r\n           setInventario(data);\r\n            let cant = getInventario();\r\n            console.log(\"stock: \"+cant);\r\n               cant> 0 ? setCartItems((prev) => ({...prev, [itemId]: prev[itemId] + 1 })) : void(0);\r\n               cant===0 ? Swal.fire(`El inventario esta vacio`) : void(0);\r\n               \r\n            //setCartItems((prev) => ({...prev, [itemId]: prev[itemId] + 1 }));\r\n            \r\n        })\r\n        .catch(error => {\r\n            console.log(error.message);\r\n        }) \r\n    };\r\n\r\n    /*bueno\r\n    const addToCart = (itemId) => {\r\n        let stock = getInventario();\r\n        console.log(\"stock: \"+stock);\r\n        setCartItems((prev) => ({...prev, [itemId]: prev[itemId] + 1 }))\r\n    };*/\r\n\r\n    const removeFromCart = async (itemId) => { \r\n        await axios.get(`http://localhost:3001/inventario/${itemId}`)\r\n        .then(({ data }) => {\r\n            //data==='Unbooked' ? setCartItems((prev) => ({...prev, [itemId]: prev[itemId] - 1 })) : void(0);\r\n            setCartItems((prev) => ({...prev, [itemId]: prev[itemId] - 1 }));\r\n        })\r\n        .catch(error => {\r\n            console.log(error.message);\r\n        }) \r\n    };\r\n\r\n    const contextValue = { cartItems, addToCart, removeFromCart, getTotalCartAmount, loggedChanger, logged, AdminChanger, admin, payAumount,setPayAumount, nombreUser, NombreUser};\r\n    return (\r\n        <ShopContext.Provider value={contextValue}>\r\n            {props.children}\r\n        </ShopContext.Provider>\r\n    );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}